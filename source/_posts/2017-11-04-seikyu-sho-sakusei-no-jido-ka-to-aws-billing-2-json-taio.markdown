---
layout: post
title: "請求書作成の自動化とaws_billing2のJSON対応と繰り返す過ち"
date: 2017-11-04 13:15:43 +0900
comments: true
published: true
categories: work
---

月初がやってきた。ある程度システム化されてるのでアカウントやタグごとにペトペトとコピペしていくことで各社への請求書・レポートを作成していく。

だが…これがおかげでさまで結構量あるようになってきた。俺の苦手な「同じことを正確・ミスなくやる」という作業が増えてきたのはよくない。もっと楽にならないか。そもそもJenkinsぐらいにやらせたいというのが本音。

[PharaohKJ/aws_billing2: Show AWS billing.](https://github.com/PharaohKJ/aws_billing2) を作って「人間のみやすいようなテーブル」を表示し、上記ある程度システム化のためにエクセルにコピペできるCSV表示機能をもたせたんだが、これをJSON出力させるようにすれば楽に作られるんじゃないか？

そういうわけで対応した。できた。請求書作成システムもある程度できた。自動でメールするようにすりゃJenkinsでもできそうだなってところまできた。

んん？　今思えば[API リファレンス - AWS 請求情報とコスト管理](http://docs.aws.amazon.com/ja_jp/awsaccountbilling/latest/aboutv2/api-reference.html)あるやん？　どうしてこんなことしてしまったのか…。

「この関数・クラス・コマンド使いにくいからオレオレラッパ作成しよう…　紆余曲折あっての改造を繰り返したら、元の関数・クラス・コマンドのニックネームになってしまった」

この過ちはリーマン2年目ぐらいで気づいたはずなんだが繰り返してしまう。でも作ってしまったものはしょうがないのでよろしければゼヒ。
