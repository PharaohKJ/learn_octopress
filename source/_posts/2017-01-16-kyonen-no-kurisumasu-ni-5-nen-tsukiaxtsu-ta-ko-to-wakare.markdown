---
layout: post
title: "去年のクリスマスに5年つきあった子と別れた"
date: 2017-01-16 01:02:49 +0900
comments: true
published: true
categories: AWS さくらVPS
---

タイトルはもちろん釣り。5年間契約していた『さくらのVPS』の最初の1台、大阪のインスタンスをついに解約した。

それにしたって数年前までは自分で用意したサーバには名付けを行って愛でたものだ。「PC名教えて」と言ってアニメキャラの名前がでてきて辟易したり、各国首都名をつけて「東京沈黙しています！」「ロンドンの回線が！」とかそういう文化は死んだ。

いわゆる『家畜とペット（Cattle v.s. Pets）』というやつだ。これについては [クラウドは家畜の群れだ。ペットのようにかわいがるな！：成迫剛志の『ICT幸福論』：オルタナティブ・ブログ](http://blogs.itmedia.co.jp/narisako/2014/07/post-047f.html) あたりを読んでいただきたい。

この解約したインスタンスでは

- Redmine
- Zabbix
- MySQL
- tDiary
- Apache
- WordPress
- nginx
- FTP

あたりを動かしていた。これらを全部同居させるために非常に難儀した。が、それがこの数年のAWSなどの時間貸しVM提供サービスやdockerの登場によって

- OS・ミドルウェアの管理がめちゃくちゃ大変
- 1ロール/1サーバ（契約）でも十分安い
- メモリやディスクの空き容量をとっても気にする必要がある & アラートを送る仕組みもいる

などなど、やっぱりみんなだるかったんだなあってところが解消されてきた。まーこのダルイところを商売してた人らがピンチになってくるかもしれないけど。私も含めてダルイだけなことを『技術』と呼んでしまっていたんだなってことを反省していただきたい。

それにしたって5年という長い間大変お世話になった。自宅サーバからこれに替えただけだいぶ知見が得られて本当に感謝している。大阪インスタンスはこれで最後で、石狩にまだ4台ほどインスタンス借りている。

最後はもうdocker上で更新しなくなったtDiaryが動いていただけになっていた。さくらさんに

- もっと安いプランがあって
- それに変更することが手数料なしでできて
- ディスクが簡単に引き継げたら

そっちに移行しようと考えていのだが、もたついている間にAWSのLightSailというものがでてきてしまって使ってみたかったのでそっちを採用してしまった。

契約して `rsync` で `/home` と `/root` をコピーし、tDiaryは [Docker Hub](https://hub.docker.com/) においてある [pharaohkj/tdiary - Docker Hub](https://hub.docker.com/r/pharaohkj/tdiary/) をプルするだけで普通に動いた（そりゃそーだ）。

結局私の要件としてはよっぽど便利な何かがある！　ってこと以外はdockerdが動けばよく、そのクラウドサービス提供コスト勝負になってしまっている感が高い。
